{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('#loader')\nsearchForm.addEventListener('submit', searchImages);\n\nlet lightbox;\n\nfunction searchImages(event) {\n    event.preventDefault();\n    galleryList.innerHTML = '';\n    loader.classList.add('loader');\n    const searchInput = document.querySelector('.search-input');\n    \n    fetchImages(searchInput.value)\n        .then(data => {\n            if (data.hits.length === 0) {\n                throw new Error('Sorry, there are no images matching your search query. Please try again!');\n            }\n            galleryList.innerHTML = createMarkup(data.hits);\n            lightbox = new SimpleLightbox('.gallery-link', {\n            captionsData: 'alt',\n            captionDelay: 250,\n            }); \n        })\n      .catch(err => iziToast.error({\n          title: '',\n          message: err.message,\n          position: 'topRight',\n        }))\n      .finally(() => {\n        searchForm.reset();\n        loader.classList.remove('loader');\n        lightbox.refresh();\n      })\n};\n\nfunction fetchImages(query) {\n    const API_KEY = '14812482-32fb1dc9e3056dda489954fb4';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    return fetch(`${BASE_URL}?${params}`)\n        .then(response => {\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status}`);\n            }\n            return response.json();\n    })\n};\n\nfunction createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n          <li class=\"gallery-item\">\n        <div class=\"img-wrapper\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-img\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            width=\"360\"\n            height=\"200\"\n          />\n          </a>\n        </div>\n        <div class=\"info-wrapper\">\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Likes</h3>\n            <p class=\"info-text\">${likes}</p>\n          </div>\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Views</h3>\n            <p class=\"info-text\">${views}</p>\n          </div>\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Comments</h3>\n            <p class=\"info-text\">${comments}</p>\n          </div>\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Downloads</h3>\n            <p class=\"info-text\">${downloads}</p>\n          </div>\n        </div>\n      </li>`).join('');\n};"],"names":["searchForm","galleryList","loader","searchImages","lightbox","event","searchInput","fetchImages","data","createMarkup","SimpleLightbox","err","iziToast","query","API_KEY","BASE_URL","params","response","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EAC/CF,EAAW,iBAAiB,SAAUG,CAAY,EAElD,IAAIC,EAEJ,SAASD,EAAaE,EAAO,CACzBA,EAAM,eAAc,EACpBJ,EAAY,UAAY,GACxBC,EAAO,UAAU,IAAI,QAAQ,EAC7B,MAAMI,EAAc,SAAS,cAAc,eAAe,EAE1DC,EAAYD,EAAY,KAAK,EACxB,KAAKE,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EACrB,MAAM,IAAI,MAAM,0EAA0E,EAE9FP,EAAY,UAAYQ,EAAaD,EAAK,IAAI,EAC9CJ,EAAW,IAAIM,EAAe,gBAAiB,CAC/C,aAAc,MACd,aAAc,GAC1B,CAAa,CACb,CAAS,EACF,MAAMC,GAAOC,EAAS,MAAM,CACzB,MAAO,GACP,QAASD,EAAI,QACb,SAAU,UACpB,CAAS,CAAC,EACH,QAAQ,IAAM,CACbX,EAAW,MAAK,EAChBE,EAAO,UAAU,OAAO,QAAQ,EAChCE,EAAS,QAAO,CACxB,CAAO,CACP,CAEA,SAASG,EAAYM,EAAO,CACxB,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,GAAGE,KAAYC,GAAQ,EAC/B,KAAKC,GAAY,CAClB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,UAAUA,EAAS,QAAQ,EAE3C,OAAOA,EAAS,MAC5B,CAAK,CACL,CAEA,SAASR,EAAaS,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA;AAAA,0CAGvDL;AAAA;AAAA;AAAA,mBAGvBD;AAAA,mBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCASgBC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA,YAGvB,EAAE,KAAK,EAAE,CACrB"}